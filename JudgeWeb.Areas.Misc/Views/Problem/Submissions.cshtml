@model IEnumerable<(Submission, Judging)>
@{
    Layout = null;
    Dictionary<int, string> langs = ViewBag.Lang;
}

<div class="modal fade" id="modal-@ViewData["HandleKey"]" tabindex="-1" role="dialog" aria-labelledby="modal-@ViewData["HandleKey"]-label" aria-hidden="true">
    <div class="modal-dialog" style="max-width:600px" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-@ViewData["HandleKey"]-label">
                    My Submissions
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="data-table table table-hover table-striped table-sm submissions-table" role="grid">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">time</th>
                            <th scope="col">lang</th>
                            <th scope="col">verdict</th>
                        </tr>
                    </thead>
                    <tbody id="my-submissions">
                        @foreach (var (sub, grade) in Model)
                        {
                            <tr asp-action="Submission" asp-route-sid="@sub.SubmissionId" data-toggle="ajaxWindow" data-target="view" role="row">
                                <td use-a>s@(sub.SubmissionId)</td>
                                <td use-a>@Html.CstTime(sub.Time)</td>
                                <td use-a class="text-variant">@langs[sub.Language]</td>
                                <td use-a><verdict3 value="@grade.Status" /></td>
                            </tr>
                        }

                        <if cond="Model.Count() == 0">
                            <tr role="row">
                                <td colspan="4" class="text-center">No submissions were found.</td>
                            </tr>
                        </if>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>
